/* Bookmark Post and Page */
!function(e){let t=JSON.parse(localStorage.getItem("offBkm"))||[];e.querySelector(".isBkm").querySelector("i").innerHTML=t.length;let l=()=>{localStorage.setItem("offBkm",JSON.stringify(t)),e.querySelector(".isBkm").querySelector("i").innerHTML=t.length;let l=e.querySelector("#dBmPs"),i=e.querySelector(".fullbookmark"),n="";if(t.length>0){let a=bookmarks.maxWidget,d=!1;e.location.pathname==bookmarks.noBmLink?a=bookmarks.maxAll:(a=bookmarks.maxWidget,t.length>a&&(d=!0)),t.slice(0,a).forEach(e=>{n+='<div class="item" id="'+e.id+'"><div class="pThmb"><a class="thmb" href="'+e.url+'" title="'+e.title+'"><img class="bkmImg" alt="'+e.title+'" src="'+e.img+'" title="'+e.title+'"></a></div><div class="itmTtl"><a href="'+e.url+'" title="'+e.title+'">'+e.title+'</a></div><div class="del" role="button">'+bookmarks.delIcon+"</div></div>"}),l.innerHTML+="</div>",e.location.pathname==bookmarks.noBmLink?(l.innerHTML=bookmarks.currentText,i&&(i.innerHTML="<div>"+n+"</div>")):(l.innerHTML="<div>"+n,d&&(l.innerHTML+='<div class="bm-more"><a href="'+bookmarks.noBmLink+'" title="'+bookmarks.noBmAll+'">'+bookmarks.noBmAll+" (+"+(t.length-a)+")</a></div>"))}else l&&(l.innerHTML='<div class="n">'+bookmarks.noBmIcon+"<p>"+bookmarks.noBmMes+'</p><a class="button" href="/search">'+bookmarks.noBmAll+"</a></div>"),i&&(i.innerHTML=bookmarks.noBmMes);r()},i=e=>{t.push(e),l()},n=i=>{t=t.filter(e=>e.id!==i),l(),e.getElementById("bm-"+i)&&(e.getElementById("bm-"+i).checked=!1)},r=()=>{let t=e.querySelectorAll(".del");t.length>0&&t.forEach(e=>{let t=e.parentNode.getAttribute("data-id");e.addEventListener("click",()=>{n(t)})})};e.location.pathname==bookmarks.noBmLink&&l(),e.querySelector(".isBkm").addEventListener("click",()=>{l()}),e.addEventListener("scroll",()=>{}),(()=>{let l=e.querySelectorAll(".bmbox input");l.length>0&&l.forEach(e=>{e.addEventListener("change",()=>{let l=e.id.split("-")[1],r=e.parentNode,a={id:l,img:r.querySelector("label").getAttribute("bm-img"),title:r.querySelector("label").getAttribute("bm-ttl"),url:r.querySelector("label").getAttribute("bm-url")};if(t){let d=t.find(e=>e.id===l);d?n(l):i(a)}else i(a)})})})(),t.length>0&&t.forEach(t=>{e.getElementById("bm-"+t.id)&&(e.getElementById("bm-"+t.id).checked=!0)})}(document);